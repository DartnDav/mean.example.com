var articlesApp=function(){function e(e,t,n){let a=document.getElementById(e);a.addEventListener("submit",function(e){e.preventDefault();let i=new FormData(a),r=`${window.location.origin}${t}`,l=new XMLHttpRequest;l.open(n,r),l.setRequestHeader("Content-Type","application/json; charset=UTF-8");let s={};i.forEach(function(e,t){s[t]=e}),l.send(JSON.stringify(s)),l.onload=function(){!0===JSON.parse(l.response).success?window.location.href="/articles/app":document.getElementById("formMsg").style.display="block"}})}return{deleteArticle:function(e){!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("DELETE",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){!0===JSON.parse(n.response).success?window.location.hash="#":alert("Unknown error, the article could not be deleted")}}(e)},load:function(){let t=window.location.hash.split("-");switch(t[0]){case"#create":document.getElementById("app").innerHTML='\n        <div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">Create a New Article</h2>\n            <div class="float-right">\n              <a href="#" class="btn btn-primary">Cancel</a>\n            </div>\n          </div>\n          <div class="card-body">\n            <form id="createArticle" class="card-body">\n              <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n\n              <div class="row">\n                <div class="form-group col-md-6">\n                  <label for="first_name">First Name</label>\n                  <input type="text" id="first_name" name="first_name" class="form-control" required>\n                </div>\n\n                <div class="form-group col-md-6">\n                  <label for="last_name">Last Name</label>\n                  <input type="text" id="last_name" name="last_name" class="form-control" required>\n                </div>\n              </div>\n\n              <div class="row">\n                <div class="form-group col-md-6">\n                  <label for="title">Title</label>\n                  <input type="text" id="title" name="title" class="form-control" required>\n                </div>\n\n                <div class="form-group col-md-6">\n                  <label for="description">Description</label>\n                  <input type="text" id="description" name="description" class="form-control" required>\n                </div>\n              </div>\n              <div class="row">\n                <div class="form-group col-md-12">\n                <label for="body">Article Body</label><textarea class="form-control" id="exampleFormControlTextarea1" rows="3" required></textarea>\n                </div>\n              </div>\n\n              <div class="text-right">\n                <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n              </div>\n            </form>\n          </div>\n        </div>\n    ',e("createArticle","/api/articles","POST");break;case"#view":!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),a="";a=`<div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">${t.article.description} ${t.article.keywords}</h2>\n          <div class="float-right">\n            <a href="#edit-${t.article._id}" class="btn btn-primary">Edit</a>\n          </div>\n        </div>\n        <div class="card-body">\n          <div>${t.article.title}</div>\n          <div>${t.article.slug}</div>\n        </div>\n      </div>`,e.innerHTML=a}}(t[1]);break;case"#edit":!function(t){let n=`${window.location.origin}/api/articles/${t}`,a=new XMLHttpRequest;a.open("GET",n),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.send(),a.onload=function(){let t=document.getElementById("app"),n=JSON.parse(a.response);var i=`\n        <div class="card">\n          <div class="card-header clearfix">\n            <h2 class="h3 float-left">Edit</h2>\n            <div class="float-right">\n              <a href="#" class="btn btn-primary">Cancel</a>\n            </div>\n          </div>\n          <div class="card-body">\n            <form id="editArticle" class="card-body">\n              <input type="hidden" id="_id" name="_id" value="${n.article._id}">\n              <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n\n              <div class="row">\n                <div class="form-group col-md-6">\n                  <label for="first_name">First Name</label>\n                  <input type="text" id="first_name" name="first_name" class="form-control" value="${n.article.first_name}" required>\n                </div>\n\n                <div class="form-group col-md-6">\n                  <label for="last_name">Last Name</label>\n                  <input type="text" id="last_name" name="last_name" class="form-control" value="${n.article.last_name}" required>\n                </div>\n              </div>\n\n              <div class="row">\n                <div class="form-group col-md-6">\n                  <label for="title">Title</label>\n                  <input type="text" id="title" name="title" class="form-control" value="${n.article.title}" required>\n                </div>\n\n                <div class="form-group col-md-6">\n                  <label for="description">Description</label>\n                  <input type="text" id="description" name="description" class="form-control" value="${n.article.description}" required>\n                </div>\n              </div>\n\n              <div class="text-right">\n                <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n              </div>\n            </form>\n          </div>\n        </div>\n        <div>\n          <a href="#delete-${n.article._id}" class="btn text-danger">Delete</a>\n        </div>\n      `;t.innerHTML=i,e("editArticle","/api/articles","PUT")}}(t[1]);break;case"#delete":!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),a="";a=`<div class="card bg-transparent border-danger text-danger bg-danger">\n        <div class="card-header bg-transparent border-danger">\n          <h2 class="h3 text-center">You Are About to Delete a Article</h2>\n        </div>\n        <div class="card-body text-center">\n          <div>\n            Are you sure you want to delete\n            <strong>${t.article.description} ${t.article.keywords}</strong>?\n          </div>\n\n          <div>Title: <strong>${t.article.title}</strong></div>\n          <div>Slug: <strong>${t.article.slug}</strong></div>\n\n          <div class="text-center">\n            <br>\n            <a onclick="articlesApp.deleteArticle('${t.article._id}');" class="btn btn-lg btn-danger text-white">\n            Yes delete ${t.article.title}\n            </a>\n            <br><br><br>\n            <a class="btn text-muted" href="#articles">cancel</a>\n\n          </div>\n        </div>\n      </div>`,e.innerHTML=a}}(t[1]);break;default:!function(){let e=`${window.location.origin}/api/articles`,t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).articles,a="",i="";for(let e=0;e<n.length;e++)i+=`<tr>\n          <td>\n            <a href="#view-${n[e]._id}">${n[e].keywords}, ${n[e].description}</a>\n          </td>\n          <td>${n[e].title}</td>\n          <td>${n[e].slug}</td>\n          <td>${n[e].body}</td>\n        </tr>`;a=`<div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">Articles</h2>\n          <div class="float-right">\n            <a href="#create" class="btn btn-primary">New Article</a>\n          </div>\n        </div>\n        <div class="table-responsive">\n          <table class="table table-striped table-hover table-bordered">\n            <thead>\n              <tr>\n                <td>Name</td>\n                <td>Title</td>\n                <td>Description</td>\n                <td>Article</td>\n              </tr>\n            </thead>\n            <tbody>${i}</tbody>\n          </table>\n        </div>\n      </div>`,e.innerHTML=a}}()}}}}();articlesApp.load(),window.addEventListener("hashchange",function(){articlesApp.load()});